<!DOCTYPE html>
<html style="height: 100%" lang="zh">

	<head>
		<meta charset="utf-8">
		<script type="text/javascript" src="js/echarts.js"></script>
		<script type="text/javascript" src="js/jquery.js"></script>
		<script type="text/javascript" src="js/dataTool.js"></script>
	</head>

	<body style="height: 100%; margin: 0">
		<div id="container" style="height: 100%"></div>
		<script type="text/javascript">
			var dom = document.getElementById("container");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			myChart.showLoading();
			$.get('data/les-miserables.gexf', function(xml) {
				myChart.hideLoading();
				var graph = echarts.dataTool.gexf.parse(xml);
				var categories = [];
				for (var i = 0; i < 9; i++) {
					categories[i] = {
						name: '系列' + i
					};
				}
				graph.nodes.forEach(function(node) {
					node.itemStyle = null;
					node.value = node.symbolSize;
					node.label = {
						normal: {
							show: node.symbolSize > 30
						}
					};
					node.category = node.attributes.modularity_class;
				});
				option = {
					title: {
						text: 'Les Miserables',
						subtext: 'Default layout',
						top: 'bottom',
						left: 'right'
					},
					tooltip: {},
					legend: [{ // selectedMode: 'single',
						data: categories.map(function(a) {
							return a.name;
						})
					}],
					animationDuration: 1500,
					animationEasingUpdate: 'quinticInOut',
					series: [{
						name: 'Les Miserables',
						type: 'graph',
						layout: 'none',
						data: graph.nodes,
						links: graph.links,
						categories: categories,
						roam: true,
						label: {
							normal: {
								position: 'right',
								formatter: '{b}'
							}
						},
						lineStyle: {
							normal: {
								curveness: 1
							}
						}
					}]
				};
				myChart.setOption(option);
			}, 'xml');;
			if (option && typeof option === "object") {
				var startTime = +new Date();
				myChart.setOption(option, true);
				var endTime = +new Date();
				var updateTime = endTime - startTime;
				console.log("Time used:", updateTime);
			}
		</script>
	</body>

</html>